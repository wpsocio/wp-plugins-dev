{
	"$schema": "./../../schema.json",
	"project": {
		"title": "WP Telegram",
		"key": "wptelegram",
		"slug": "wptelegram"
	},
	"bundle": {
		"tasks": [
			{
				"type": "preScripts",
				"data": [""]
			},
			{
				"type": "updateRequirements",
				"data": {
					"requirements": {
						"requiresPHP": "8.0",
						"requiresAtLeast": "6.2",
						"testedUpTo": "6.4.1"
					},
					"target": {
						"files": [
							"dev.php",
							"src/{slug}.php",
							"src/README.txt",
							"README.md"
						]
					}
				}
			},
			{
				"type": "updateVersion",
				"data": [
					{
						"type": "packageJson"
					},
					{
						"type": "composerJson"
					},
					{
						"type": "readmeFiles"
					},
					{
						"type": "pluginMainFile"
					},
					{
						"type": "sinceTag"
					},
					{
						"type": "general",
						"files": ["src/{slug}.php"],
						"textPatterns": [
							{
								"pattern": "{key}_VER',\\s*'([0-9a-z-+.]+)",
								"flags": "gi"
							}
						]
					}
				]
			},
			{
				"type": "generatePot",
				"data": {
					"source": "src",
					"textDomain": "{slug}",
					"headers": {
						"language": "en_US",
						"X-Poedit-Basepath": "..",
						"Plural-Forms": "nplurals=2; plural=n != 1;",
						"X-Poedit-KeywordsList": "__;_e;_x;esc_attr__;esc_attr_e;esc_html__;esc_html_e",
						"X-Poedit-SearchPath-0": ".",
						"X-Poedit-SearchPathExcluded-0": "assets"
					},
					"mergeFiles": ["src/languages/js-translations.pot"],
					"makePotArgs": {
						"slug": "{slug}"
					}
				}
			},
			{
				"type": "updatePoFiles",
				"data": {
					"source": "src/languages/{slug}.pot"
				}
			},
			{
				"type": "makeMoFiles",
				"data": {
					"source": "src/languages/"
				}
			},
			{
				"type": "jsPotToPhp",
				"data": {
					"potFile": "src/languages/js-translations.pot",
					"textDomain": "{slug}"
				}
			},
			{
				"type": "processStyles",
				"data": {
					"files": ["src/assets/static/css/*.css"],
					"ignore": ["src/assets/static/css/*.min.css"]
				}
			},
			{
				"type": "copyFiles"
			},
			{
				"type": "postScripts",
				"data": []
			},
			{
				"type": "createArchive",
				"data": {
					"outPath": "{slug}-{version}.zip"
				}
			}
		]
	}
}
